version: "3.3"

services:
  world-cars-api:
  container_name: world-cars-api
  restart: always
  image: node:20.100
  ports:
      -4001:3007
  volumes:
        - ./:usr/src/world-cars
  working_dir: /usr/src/world-cars


  networks:
     - monorepo-network

  #FOR PRODUCTION

  command: bash -c "npm install && npm run build && npm run start:prod"


world-cars-batch:
  container_name: world-cars-batch
  restart: unless-stopped
  image: node:20.10.0
  ports:
     - 4002:3008
  volums:
     - ./:/usr/src/world-cars
  working_dir: /usr/src/world-cars


  networks:
    - monorepo-network:
         driver: bridge


  #FOR PRODUCTION
  command: bash -c "npm install && npm run build && npm start:prod:batch"


networks:
  monorepo-network:
